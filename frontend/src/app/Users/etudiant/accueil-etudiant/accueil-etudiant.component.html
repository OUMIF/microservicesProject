
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Header Harvard Online -->
<!-- Dans le header -->
<header class="main-header">
  <div class="logo-container">
    <a class="site-logo" routerLink="/welcome">
      EduF<i class="fas fa-graduation-cap logo-icon"></i>rma
    </a>
  </div>
  
  <!-- Dans le header -->
  <div class="secondary-nav">
    <ul>
      <li class="nav-icons">
        <!-- Notifications -->
        <div class="notification-container" (mouseenter)="showNotifications = true" (mouseleave)="showNotifications = false">
          <a href="#" class="nav-icon" (click)="$event.preventDefault()">
            <i class="fas fa-bell"></i>
            <span class="notification-badge" *ngIf="unreadNotificationsCount > 0">{{ unreadNotificationsCount }}</span>
          </a>
          
          <div class="notification-dropdown" *ngIf="showNotifications">
            <div class="notification-header">
              <h4>Notifications ({{ notifications.length }})</h4>
            </div>
            <div class="notification-list">
              <div *ngFor="let notif of notifications; let i = index" 
                  class="notification-item" 
                  [class.unread]="!notif.read"
                  (click)="markAsRead(i)">
                <div class="notification-content">
                  <h5>{{ notif.title }}</h5>
                  <p>{{ notif.message }}</p>
                  <small>{{ notif.date }}</small>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Historique -->
        <div class="history-container" (mouseenter)="showHistory = true" (mouseleave)="showHistory = false">
          <a href="#" class="nav-icon" (click)="$event.preventDefault()">
            <i class="fas fa-history"></i>
          </a>

          <div class="history-dropdown" *ngIf="showHistory">
            <div class="history-header">
              <h4>Historique des Tests</h4>
            </div>
            <div class="history-list">
              <div *ngFor="let test of testHistory" class="history-item" (click)="navigateToTest(test.id)">
                <div class="test-info">
                  <h5>{{ test.title }}</h5>
                  <p>{{ test.score }} - {{ test.date }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Profil -->
        <a class="nav-icon" (click)="openAccountModal()">
          <i class="fas fa-user"></i>
        </a>
      </li>
    </ul>
  </div>
</header>

<!-- Hero Section -->
<section class="hero-section">
  <div class="hero-content">
    <section class="featured-course">      
      <div class="course-details">
        <h2 class="course-title">Bienvenue dans votre espace d’évaluation</h2>
        <p class="course-description">
          Participez à l’amélioration des formations en évaluant celles que vous avez suivies via des questionnaires en ligne, simples et confidentiels.Chaque réponse compte vos retours sont analysés pour ajuster et renforcer la qualité de l’enseignement.
        </p>
        <p class="course-description">
          Grâce à cette plateforme centralisée, vous devenez acteur du changement et partenaire de l’évolution pédagogique.
        </p>
      </div>
    </section>
  </div>
</section>



<!-- Dans le main -->
<main>

  <section class="limited-capacity">
    <div class="content-wrapper">
      <h2>Explorez les formations</h2>
      <p>Ne manquez pas les dernières sessions d’évaluation. Consultez les formations disponibles et accédez aux tests correspondants.</p><hr>
      <div class="title-underline"></div>
    </div>
  </section>
</main>




<div class="field__item">
  <div class="grid-course-teaser grid-container layout layout--col-three-three-one">
    <div class="grid-x grid-margin-half layout__region" data-once="vpalEmptyLayout vpalCoursesView">
      <div *ngFor="let course of courses; let i = index" 
           class="cell medium-6 large-4 layout__region"
           [class.layout__region--first]="i === 0"
           [class.layout__region--second]="i === 1"
           [class.layout__region--third]="i === 2"
           data-once="vpalEmptyLayout">
        
        <div class="paragraph paragraph--type--course-teaser paragraph--view-mode--default">
          <div class="paragraph-inner">
            <div class="field field--name-field-course field--type-entity-reference field--label-hidden field__items">
              <div class="field__item">
                <article class="content-type--course node-view-mode--teaser" 
                         [attr.title]="course.title"
                         style="height: 624px; opacity: 1; pointer-events: all;">
                  <a (click)="navigateToCourseDetail(course)" class="read-more-link" data-once="dlInternalCampaignClicked dlLinkClicked">Read More</a>
                  <div class="inner-wrapper">
                    <div class="image" [style.background-image]="'url(' + course.imageUrl + ')'"></div>
                    
                    <div class="group-info">
                      <div class="field field--name-title field--type-string field--label-hidden field__items">
                        <div class="field__item"><h3>{{ course.title }}</h3></div>
                      </div>
                      <div class="field field--name-field-tagline field--type-text field--label-hidden field__items">
                        <div class="field__item">{{ course.tagline }}</div>
                      </div>
                    </div>
                    
                    <div class="show-on-hover">
                      <div class="field field--name-field-teaser-description field--type-text-long field--label-hidden field__items">
                        <div class="field__item" [innerHTML]="course.description"></div>
                      </div>
                      <div class="node-link" (click)="navigateToCourseDetail(course)">
                        <span>Accéder à l’évaluation &gt;</span>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<div class="courses-section">
  <a href="#" class="course-button">VOIR TOUS LES FORMATIONS</a>
</div>
<hr class="footer-divider">
<!-- Section footer avec formulaire de contact -->
<footer class="footer-section">
  <div class="footer-container">
      <!-- Logo et marque -->
       
      <div class="footer-brand">
        <div class="logo-container">
          <a class="site-logo" routerLink="/welcome">
            EduF<i class="fas fa-graduation-cap logo-icon"></i>rma
          </a>
        </div>
      </div>
      
      <!-- Formulaire de contact -->
      <div class="footer-contact">
          <h2>Avez-vous des questions?</h2>
          <p>N'hésitez pas à nous contacter</p>
          <form class="contact-form">
              <input type="email" placeholder="Email" required>
              <input type="text" placeholder="Message">
              <button type="submit">ENVOYER</button>
          </form>
      </div>
      
      <!-- Réseaux sociaux -->
      <div class="footer-social">
          <h3>Contactez-nous</h3>
          <div class="social-icons">
              <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
              <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
              <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
              <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
              <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
          </div>
      </div>
  </div>
</footer>



<div class="modal-overlay" *ngIf="showAccountModal">
  <div class="modal">
    <div class="profile-content">
      <!-- Section Photo avec upload -->
      <div class="photo-upload-section">
        <div class="avatar-container" (click)="fileInput.click()">
          <div *ngIf="!currentStudent.photo" class="avatar-initials">
            {{ getInitials() }}
          </div>
          <img *ngIf="currentStudent.photo" [src]="currentStudent.photo" class="avatar-image">
          <input #fileInput type="file" hidden (change)="onFileSelected($event)">
        </div>
        <button class="upload-button" (click)="fileInput.click()">Changer la photo</button>
      </div>

      <form>
        <div class="form-row">
          <div class="form-group">
            <label>CNE:</label>
            <input type="text" [value]="currentStudent.cne" readonly>
          </div>
          <div class="form-group">
            <label>Nom:</label>
            <input type="text" [value]="currentStudent.lastName" readonly>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Prénom:</label>
            <input type="text" [value]="currentStudent.firstName" readonly>
          </div>
          <div class="form-group">
            <label>Email:</label>
            <input type="email" [value]="currentStudent.email" readonly>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Date de naissance:</label>
            <input type="text" [value]="currentStudent.birthDate | date:'dd/MM/yyyy'" readonly>
          </div>
          <div class="form-group">
            <label>Lieu de naissance:</label>
            <input type="text" [value]="currentStudent.birthPlace" readonly>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Filière:</label>
            <input type="text" [value]="currentStudent.program" readonly>
          </div>
          <div class="form-group">
            <label>Année d'étude:</label>
            <input type="text" [value]="currentStudent.studyYear" readonly>
          </div>
        </div>
      </form>
    </div>

    <div class="form-actions">
      <button type="button" class="close-button" (click)="closeAccountModal()">Fermer</button>
    </div>
  </div>
</div>












